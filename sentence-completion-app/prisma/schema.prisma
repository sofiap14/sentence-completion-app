// prisma/schema.prisma

datasource db {
  provider = "postgresql" // or your chosen database provider
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id             Int         @id @default(autoincrement())
  email          String      @unique
  password       String
  currentWeek    Int         @default(1)
  weekStartDate  DateTime    @default(now())
  weekCompleted  Boolean     @default(false)
  responses      Response[]  @relation("UserResponses")
  // Add other user fields as necessary
}

model SentenceStem {
  id         Int         @id @default(autoincrement())
  text       String
  weekNumber Int
  order      Int
  responses  Response[]  @relation("StemResponses")
  // Add other stem fields as necessary
}

model Response {
  id             Int          @id @default(autoincrement())
  responseText   String
  createdAt      DateTime     @default(now())
  userId         Int
  sentenceStemId Int

  user           User         @relation("UserResponses", fields: [userId], references: [id])
  sentenceStem   SentenceStem @relation("StemResponses", fields: [sentenceStemId], references: [id])

  @@index([userId, sentenceStemId, createdAt])
}
